<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:camel="http://camel.apache.org/schema/spring"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">

    <import resource="beans.xml" />
    <camel:camelContext>

        <camel:route>
            <camel:from
                    uri="cxfrs:bean:restProxyEndpoint?synchronous=true&amp;bindingStyle=SimpleConsumer&amp;propagateContexts=false&amp;continuationTimeout=120000" />
            <camel:process ref="storeInitialHeaders" />
            <camel:to uri="direct:helper" />
            <camel:process ref="replaceHeaders" />
            <camel:removeHeaders pattern="cxf*" />
        </camel:route>

        <camel:route>
            <camel:from uri="direct:helper" />
            <camel:to uri="cxfrs:bean:restClientEndpoint?propagateContexts=false&amp;throwExceptionOnFailure=false&amp;synchronous=true" />
        </camel:route>

        <camel:route>
            <camel:from
                    uri="cxfrs:bean:restMockEndpoint?synchronous=true&amp;bindingStyle=SimpleConsumer&amp;propagateContexts=false&amp;continuationTimeout=120000" />
            <camel:setHeader headerName="CamelHttpResponseCode">
                <camel:constant>200</camel:constant>
            </camel:setHeader>
            <camel:setBody>
                <camel:constant>&lt;success/&gt;</camel:constant>
            </camel:setBody>
            <camel:setHeader headerName="CustomContentType">
                <camel:constant>application/json</camel:constant>
            </camel:setHeader>

        </camel:route>
    </camel:camelContext>
</beans>